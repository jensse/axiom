{{- $provider := .Site.Params.cdn.provider | default "local" }}
{{- $preset := index .Site.Params $provider "presets" .preset | default "" }}
{{- $type := .type | default .Site.Params.cdn.type }}
{{- $resource := "" }}

{{/* default: params.cdn.provider=local */}}
{{- if eq .Site.Params.path.localAbsURL true -}}
{{- $resource = .src | absURL }}
{{- else -}}
{{- $resource = .src | relURL }}
{{- end -}}

{{- if eq "cloudinary" $provider -}}
{{- $type = index .Site.Params.cloudinary $type }}
{{- $resource = printf "%s%s%s%s%s" .Site.Params.cloudinary.host $type $preset .Site.Params.cloudinary.version .src }}
{{- end -}}

{{ return $resource }}
